version: 1
name: mcp-firewall
description: MCP Firewall with rules engine for filtering text when using LLMs

# Start command configuration - uses basic HTTP server without dependencies
startCommand:
  type: http
  command: ["python", "-u", "/app/app/basic_server.py"]
  port: 6366
  healthCheckPath: "/health"  # Specified explicitly
  readinessTimeoutSeconds: 60  # Allow more time for startup

# Environment variables
env:
  PYTHONUNBUFFERED: "1"
  PYTHONPATH: "/app"
  LOG_LEVEL: "DEBUG"
  PORT: "6366"  # Explicit port configuration

# MCP tool configuration - precisely matches implementation
tools:
  - name: process_text
    description: Process text through the firewall rules engine
    parameters:
      text:
        type: string
        description: The text to process
  - name: get_rules
    description: Gets all firewall rules
    parameters: {}